<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Account</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="logout()" *ngIf="currentUser">
        <ion-icon slot="start" name="exit"></ion-icon>
        Logout
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-button
    class="ion-margin"
    *ngIf="!currentUser"
    [routerLink]="'/login'"
    expand="full"
    fill="clear"
  >
    Login to Your Account
  </ion-button>
  <div class="user-details" *ngIf="currentUser">
    <ion-card color="danger" class="ion-no-margin">
      <ion-card-header>
        <ion-card-subtitle>Policy Schedule</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <h1>
          {{ currentUser.policy.policySchedule.dueDate }} - {{
          currentUser.policy.policySchedule.premiumDue | currency:
          currentUser.policy.policySummary.currency }}
        </h1>
      </ion-card-content>
    </ion-card>
    <ion-card color="primary">
      <ion-card-header>
        <ion-card-subtitle>{{ currentUser.email }}</ion-card-subtitle>
        <ion-card-title>{{ currentUser.name }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>{{ currentUser.address }}</p>
        <p>{{ currentUser.contact }}</p>
      </ion-card-content>
    </ion-card>
    <ion-card>
      <ion-card-header>
        <ion-card-title>Policy Summary</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-label>
              <strong>Policy Number: </strong>
              {{ currentUser.policy.policySummary.policyNumber }}
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label>
              <strong>Maturity Date: </strong>
              {{ currentUser.policy.policySummary.effectiveDate }} - {{
              currentUser.policy.policySummary.maturityDate }}
            </ion-label>
          </ion-item>
          <ion-item>
            <ion-label>
              <strong>Face Amount: </strong>
              {{ currentUser.policy.policySummary.faceAmount | currency:
              currentUser.policy.policySummary.currency }}
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
    <div class="recent-transaction">
      <ion-grid>
        <ion-row class="table-row">
          <ion-col size="3" class="ion-text-center">
            <p>Transaction Date</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>Transaction</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>Amount</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>OR Number</p>
          </ion-col>
        </ion-row>
        <ion-row *ngFor="let history of currentUser.policy.policyHistory">
          <ion-col size="3" class="ion-text-center">
            <p>{{ history.transactionDate }}</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>{{ history.transaction }}</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>{{ history.amount | currency: 'USD' }}</p>
          </ion-col>
          <ion-col size="3" class="ion-text-center">
            <p>#{{ history.orNumber }}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <ion-button expand="full" fill="clear">
              View More
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ion-content>
